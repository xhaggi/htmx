!function(e,t){"function"==typeof define&&define.amd?define(["htmx.org"],t):"object"==typeof module&&module.exports?module.exports=t(require("htmx.org")):t(e.htmx)}("undefined"!=typeof self?self:this,(function(e){return function(){var t=null;function r(e,r){if(e&&e.indexOf("<head")>-1){const p=document.createElement("html");var n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"").match(/(<head(\s[^>]*>|>)([\s\S]*?)<\/head>)/im);if(n){var o=[],d=[],a=[],i=[];p.innerHTML=n;var u=p.querySelector("head"),h=document.head;if(null==u)return;var m=new Map;for(const e of u.children)m.set(e.outerHTML,e);var s=t.getAttributeValue(u,"hx-head")||r;for(const e of h.children){var l=m.has(e.outerHTML),c="re-eval"===e.getAttribute("hx-head"),f="true"===t.getAttributeValue(e,"hx-preserve");l||f?c?d.push(e):(m.delete(e.outerHTML),a.push(e)):"append"===s?c&&(d.push(e),i.push(e)):!1!==t.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:e})&&d.push(e)}i.push(...m.values());for(const e of i){var g=document.createRange().createContextualFragment(e.outerHTML);!1!==t.triggerEvent(document.body,"htmx:addingHeadElement",{headElement:g})&&(h.appendChild(g),o.push(g))}for(const e of d)!1!==t.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:e})&&h.removeChild(e);t.triggerEvent(document.body,"htmx:afterHeadMerge",{added:o,kept:a,removed:d})}}}e.defineExtension("head-support",{init:function(n){t=n,e.on("htmx:afterSwap",(function(e){var n=e.detail.xhr.response;t.triggerEvent(document.body,"htmx:beforeHeadMerge",e.detail)&&r(n,e.detail.boosted?"merge":"append")})),e.on("htmx:historyRestore",(function(e){t.triggerEvent(document.body,"htmx:beforeHeadMerge",e.detail)&&(e.detail.cacheMiss?r(e.detail.serverResponse,"merge"):r(e.detail.item.head,"merge"))})),e.on("htmx:historyItemCreated",(function(e){e.detail.item.head=document.head.outerHTML}))}})}(),e}));